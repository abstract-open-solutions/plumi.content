<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      i18n:domain="example.dexterityforms"
      metal:use-macro="context/main_template/macros/master">
      
    <metal:block fill-slot="main">
        
        <h1 class="documentFirstHeading" tal:content="view/label | nothing" />
                
        <div id="content-core">
            <div id="uploader">
                <div id="multipleupload-code">
                    <script>var $_original = jQuery.noConflict();</script>
                    <script src="jsvariables" type="text/javascript"></script>
                    <script src="++resource++collective.upload/jquery.1.7.1.js"></script>
                    <script>var j$ = $; $ = $_original; jQuery = $_original;</script>
                    <!-- The jQuery UI widget factory, can be omitted if jQuery UI is already included -->
                    <script src="++resource++collective.upload/jquery.ui.widget.js"></script>
                    <!-- The Load Image plugin is included for the preview images and image resizing functionality -->
                    <script src="++resource++collective.upload/load-image.min.js"></script>
                    <!-- The Canvas to Blob plugin is included for image resizing functionality -->
                    <script src="++resource++collective.upload/canvas-to-blob.min.js"></script>
                    <script src="++resource++collective.upload/jquery.iframe-transport.js"></script>
                    <script src="++resource++collective.upload/jquery.fileupload.js"></script>
                    <!-- The File Upload image processing plugin -->
                    <script src="++resource++collective.upload/jquery.fileupload-ip.js"></script>
                    <script src="++resource++collective.upload/jquery.fileupload-ui.js"></script>
                    <script src="++resource++collective.upload/application.js"></script>
                    <script src="++resource++collective.upload/media-upload-init-behavior.js"></script>
                </div>
                <link rel="stylesheet" type="text/css" media="screen" href="++resource++plumi.content.stylesheets/publish.css" />
                <div id="upload-form-top">
                    <form id="fileupload" action="." tal:attributes="action string:${context/absolute_url}/plumi_uploader" method="POST"
                    enctype="multipart/form-data">
                        <div class="row">
                            <div class="cell position-0 width-full fileupload-buttonbar">
                                <div class="controls">
                                    <span class="btn success fileinput-button">
                                        <span i18n:translate="">Add files or images</span>
                                        <input type="file" name="files[]" multiple="multiple" />
                                    </span>
                                    <button type="submit" class="btn start">
                                        <span class="" i18n:translate="">Start upload</span>
                                    </button>
                                    <button type="reset" class="btn cancel">
                                        <span class="" i18n:translate="">Cancel upload</span>
                                    </button>
                                    <button type="reset" class="btn danger delete">
                                        <span class="" i18n:translate="">Delete selected</span>
                                    </button>
                                    <input type="checkbox" class="toggle" />
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="cell position-0 width-full">
                                <table class="zebra-striped results">
                                    <thead>
                                        <tr>
                                            <th colspan="6" class="nosort">
                                                <div class="progress-bar-container">
                                                    <span i18n:translate="">Progress bar</span>
                                                    <div class="progressbar fileupload-progressbar">
                                                        <div style="width:0%;"></div>
                                                    </div>
                                                </div>
                                            </th>
                                        </tr>
                                    </thead>
                                    <tbody class="files">
                                        <tr>
                                            <td colspan="6"></td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </form>
                </div>    
            </div>
            <div class="row">
                <metal:block use-macro="context/@@ploneform-macros/titlelessform" />
            </div>
            <script language="javascript">
                // perform JavaScript after the document is scriptable.
                
                j$('#fileupload').fileupload({ 
                    maxNumberOfFiles: 1, 
                    autoUpload: true 
                }); 
                
                j$('#fileupload').bind('fileuploadstarted', 
                    function (e,data) {
                        $(".btn.success, .alert-message.success").hide();
                        $("#upload-form-top table.zebra-striped").show(); 
                    }
                );                    
            </script>
        </div>
        
    </metal:block>
    
</html>
